ğŸ”¥ Â¿QuÃ© es iptables?
iptables es una herramienta de Linux que sirve para controlar el trÃ¡fico de red que entra, sale o pasa por un servidor.
ğŸ‘‰ En otras palabras:
 iptables = firewall del sistema
Con iptables decides:
QuÃ© puertos estÃ¡n abiertos
QuÃ© conexiones se permiten
QuÃ© trÃ¡fico se bloquea

ğŸ§  Conceptos bÃ¡sicos de iptables
ğŸ“Œ Cadenas (Chains)
Las reglas se organizan en cadenas. Las mÃ¡s comunes son:
Cadena
Para quÃ© sirve
INPUT
TrÃ¡fico que entra al servidor
OUTPUT
TrÃ¡fico que sale del servidor
FORWARD
TrÃ¡fico que pasa por el servidor (router)

En tu caso, nos interesÃ³ INPUT, porque el jump host querÃ­a entrar a stapp01.

ğŸ“Œ Reglas
Cada regla dice:
â€œSi el trÃ¡fico cumple estas condiciones â†’ haz estoâ€
Ejemplo:
-p tcp --dport 3003 -j ACCEPT

Significa:
-p tcp â†’ protocolo TCP


--dport 3003 â†’ puerto destino 3003


-j ACCEPT â†’ permitir la conexiÃ³n



ğŸ“Œ Orden de las reglas (MUY importante)
iptables evalÃºa de arriba hacia abajo:
1ï¸âƒ£ Primera regla
 2ï¸âƒ£ Segunda
 3ï¸âƒ£ â€¦
 âŒ Si llega a un REJECT o DROP, se bloquea
Por eso insertamos la regla del puerto 3003 al inicio:
iptables -I INPUT 1 ...


ğŸ› ï¸ Comandos de iptables que usaste
ğŸ”¹ Ver reglas
iptables -L -n

-L â†’ lista reglas


-n â†’ no resolver nombres (mÃ¡s rÃ¡pido)


Con nÃºmeros:
iptables -L -n --line-numbers


ğŸ”¹ Agregar regla
iptables -I INPUT -p tcp --dport 3003 -j ACCEPT

Permite conexiones al puerto 3003.

ğŸ”¹ Eliminar una regla
iptables -D INPUT 1

Elimina la regla nÃºmero 1.

ğŸ”¹ Guardar reglas
iptables-save | tee /etc/sysconfig/iptables

ğŸ‘‰ Sin esto, las reglas se pierden al reiniciar.

ğŸŒ Â¿QuÃ© es netstat?
netstat es una herramienta para ver el estado de la red del sistema.
ğŸ‘‰ Nos dice:
QuÃ© puertos estÃ¡n abiertos


QuÃ© servicios estÃ¡n escuchando


QuÃ© proceso usa cada puerto



ğŸ§  Â¿Por quÃ© usamos netstat?
Porque Apache no arrancaba, y necesitÃ¡bamos saber:
â“ Â¿Alguien mÃ¡s estÃ¡ usando el puerto 3003?

ğŸ› ï¸ Comando netstat que usamos
netstat -tulnp

Significado de cada opciÃ³n:
OpciÃ³n
Significado
-t
TCP
-u
UDP
-l
Listening (escuchando)
-n
NÃºmeros (no nombres)
-p
Muestra el proceso (PID/servicio)


ğŸ” Filtrar por puerto
netstat -tulnp | grep 3003

Salida clave que viste:
127.0.0.1:3003  LISTEN  485/sendmail

ğŸ‘‰ Eso nos dijo:
El puerto 3003 estaba ocupado


El proceso era sendmail


Por eso Apache no podÃ­a iniciar



ğŸ§  Resumen rÃ¡pido (ideal para examen o entrevista)
ğŸ”¹ iptables
Firewall de Linux que controla quÃ© trÃ¡fico entra o sale del sistema mediante reglas.
ğŸ”¹ netstat
Herramienta para ver puertos abiertos, servicios escuchando y procesos asociados.
ğŸ”¹ Problema real del lab
Sendmail ocupaba el puerto 3003


Apache no podÃ­a arrancar


El firewall bloqueaba el acceso externo


Se abriÃ³ el puerto correcto en iptables
